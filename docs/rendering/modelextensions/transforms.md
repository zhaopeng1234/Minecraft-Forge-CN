## 根变换
在模型 JSON 文件的顶级添加 `transform` 条目，会向加载器表明，对于方块模型，应在应用 [方块状态] 文件中的旋转之前对所有几何图形应用变换；对于物品模型，则应在应用 [显示变换][displaytransform] 之前应用该变换。在 `IUnbakedGeometry#bake()` 方法中，可以通过 `IGeometryBakingContext#getRootTransform()` 获取该变换。

自定义模型加载器可以完全忽略此字段。

根变换可以用两种格式指定：

1. 一个 JSON 对象，包含一个单独的 `matrix` 条目，该条目包含一个原始变换矩阵，以嵌套 JSON 数组的形式呈现，省略最后一行（3 * 4 矩阵，按行优先顺序）。该矩阵是平移、左旋转、缩放、右旋转和变换原点按此顺序组合的结果。以下示例展示了其结构：
    ```js
    "transform": {
        "matrix": [
            [ 0, 0, 0, 0 ],
            [ 0, 0, 0, 0 ],
            [ 0, 0, 0, 0 ]
        ]
    }
    ```
2. 一个 JSON 对象，包含以下可选条目的任意组合：
    - `origin`：用于旋转和缩放的原点
    - `translation`：相对平移
    - `rotation` 或 `left_rotation`：在缩放之前围绕平移后的原点应用的旋转
    - `scale`：相对于平移后原点的缩放
    - `right_rotation` 或 `post_rotation`：在缩放之后围绕平移后原点应用的旋转

### 逐元素指定
如果变换是通过选项 4 中提到的条目组合指定的，这些条目将按 `translation`（平移）、`left_rotation`（左旋转）、`scale`（缩放）、`right_rotation`（右旋转）的顺序应用。
最后一步是将变换移动到指定的原点。

```js
{
    "transform": {
        "origin": "center",
        "translation": [ 0, 0.5, 0 ],
        "rotation": { "y": 45 }
    },
    // ...
}
```

这些元素的定义预期如下：

#### 原点
原点可以指定为表示三维向量的 3 个浮点值数组：`[ x, y, z ]`，也可以指定为以下三个默认值之一：
- `"corner"`（0, 0, 0）
- `"center"`（0.5, 0.5, 0.5）
- `"opposing-corner"`（1, 1, 1）

如果未指定原点，则默认为 `"opposing-corner"`。

#### 平移
平移必须指定为表示三维向量的 3 个浮点值数组：`[ x, y, z ]`，如果未指定，则默认为 (0, 0, 0)。

#### 左旋转和右旋转
旋转可以通过以下四种方式之一指定：
- 单个 JSON 对象，包含单个轴到旋转度数的映射：`{ "x": 90 }`
- 任意数量上述格式的 JSON 对象数组（按指定顺序应用）：`[ { "x": 90 }, { "y": 45 }, { "x": -22.5 } ]`
- 3 个浮点值的数组，指定绕每个轴的旋转度数：`[ 90, 180, 45 ]`
- 4 个浮点值的数组，直接指定四元数：`[ 0.38268346, 0, 0, 0.9238795 ]`（示例表示绕 X 轴旋转 45 度）

如果未指定相应的旋转，则默认不进行旋转。

#### 缩放
缩放必须指定为表示三维向量的 3 个浮点值数组：`[ x, y, z ]`，如果未指定，则默认为 (1, 1, 1)。

[blockstate]: https://minecraft.wiki/w/Tutorials/Models#Block_states
[displaytransform]: ../modelloaders/transform.md
